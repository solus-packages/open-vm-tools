name       : open-vm-tools
version    : 10.3.0
release    : 126
source     :
    - https://github.com/vmware/open-vm-tools/releases/download/stable-10.3.0/open-vm-tools-10.3.0-8931395.tar.gz : ca5bcd62a969803015bb4ca8e2610c376487be6b6b95e7500f6684d65813b161
license    : LGPL-2.1
component  : system.utils
summary    :
    - open-vm-tools is a set of services and modules that enable several features in VMware products
    - modaliases : These files are used by the Software Center for hardware detection.
description: |
    open-vm-tools is a set of services and modules that enable several features in VMware products
builddeps  :
    - pkgconfig(fuse)
    - pkgconfig(gtkmm-3.0)
    - pkgconfig(libmspack)
    - pkgconfig(libprocps)
    - pkgconfig(sm)
    - pkgconfig(xext)
    - pkgconfig(xi)
    - pkgconfig(xinerama)
    - pkgconfig(xmlsec1)
    - pkgconfig(xrandr)
    - pkgconfig(xrender)
    - pkgconfig(xtst)
    - linux-lts
    - linux-lts-headers
    - libdnet-devel
patterns   :
    - modaliases : /usr/share/linux-driver-management/modaliases
optimize   : no-bind-now
setup      : |
    %patch -p1 < $pkgfiles/0001-Don-t-set-Werror-it-s-evil.patch
    sed -i -e 's|.*common-agent/etc/config/Makefile.*||' configure.ac
    mkdir -p common-agent/etc/config
    %reconfigure --with-kernel-release="%kernel_version_lts%" --with-gtk3 --with-gtkmm3
build      : |
    %make
install    : |
    %make_install -j1

    # Let LDM know about our aliases
    install -D -m 00644 $pkgfiles/open-vm-tools.modaliases $installdir/usr/share/linux-driver-management/modaliases/open-vm-tools.modaliases

    install -d $installdir/usr/share/defaults/etc
    mv $installdir/etc/pam.d $installdir/usr/share/defaults/etc/pam.d
