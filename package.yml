name       : open-vm-tools
version    : 10.2.5
release    : 116
source     :
    - https://github.com/vmware/open-vm-tools/releases/download/stable-10.2.5/open-vm-tools-10.2.5-8068406.tar.gz : d53be10cfa48bc4853e5fa8e16b416b11d01487d7bade226e8f79da7e9d1c2f3
license    : LGPL-2.1
component  : system.utils
summary    :
    - open-vm-tools is a set of services and modules that enable several features in VMware products
    - modaliases : These files are used by the Software Center for hardware detection.
description: |
    open-vm-tools is a set of services and modules that enable several features in VMware products
builddeps  :
    - pkgconfig(fuse)
    - pkgconfig(gtkmm-3.0)
    - pkgconfig(libmspack)
    - pkgconfig(libprocps)
    - pkgconfig(sm)
    - pkgconfig(xerces-c)
    - pkgconfig(xext)
    - pkgconfig(xi)
    - pkgconfig(xinerama)
    - pkgconfig(xrandr)
    - pkgconfig(xrender)
    - pkgconfig(xtst)
    - linux-lts
    - linux-lts-headers
    - libdnet-devel
    - xml-security-c-devel
patterns   :
    - modaliases : /usr/share/linux-driver-management/modaliases
optimize   : no-bind-now
setup      : |
    %patch -p1 < $pkgfiles/0001-Don-t-set-Werror-it-s-evil.patch
    sed -i -e 's|.*common-agent/etc/config/Makefile.*||' configure.ac
    mkdir -p common-agent/etc/config
    %reconfigure --with-kernel-release="%kernel_version_lts%" --with-gtk3 --with-gtkmm3
build      : |
    %make
install    : |
    %make_install -j1

    # Let LDM know about our aliases
    install -D -m 00644 $pkgfiles/open-vm-tools.modaliases $installdir/usr/share/linux-driver-management/modaliases/open-vm-tools.modaliases
